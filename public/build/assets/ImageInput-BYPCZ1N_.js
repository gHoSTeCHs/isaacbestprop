import{r as n,W as k,j as r}from"./app-C1W8XZAd.js";import{B as m}from"./react-toastify.esm-E3QA1qE4.js";import{c as f}from"./createLucideIcon-3yF2CT3J.js";/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=f("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),M=({onChange:d,value:l,id:R})=>{const[s,c]=n.useState([]),[h,p]=n.useState(!1),u=n.useRef(null);n.useEffect(()=>()=>{s.forEach(e=>{e.file&&URL.revokeObjectURL(e.preview)})},[s]),n.useEffect(()=>{if(l){const e=l.map(t=>t instanceof File?{file:t,preview:URL.createObjectURL(t)}:typeof t=="object"?{file:null,preview:t.path,id:t.id}:{file:null,preview:""});c(e)}},[l]);const v=e=>{e.preventDefault(),e.stopPropagation(),p(!0)},y=e=>{e.preventDefault(),e.stopPropagation(),p(!1)},x=e=>{e.preventDefault(),e.stopPropagation()},w=e=>{e.preventDefault(),e.stopPropagation(),p(!1);const t=Array.from(e.dataTransfer.files);g(t)},I=e=>{if(e.target.files){const t=Array.from(e.target.files);g(t)}},g=e=>{const o=e.filter(a=>a.type.startsWith("image/")).map(a=>({file:a,preview:URL.createObjectURL(a)})),i=[...s,...o];c(i),d(i.map(a=>a.file||a.preview))},b=e=>{const t=s.filter((o,i)=>i!==e);c(t),d(t.map(o=>o.file||o.preview))},{post:U,delete:D}=k({}),j=async e=>{try{D(route("admin.images",e),{onSuccess:()=>{m.success("Image deleted successfully")}})}catch{m.error("Something went wrong")}};return r.jsxs("div",{className:"w-full max-w-md mx-auto",children:[r.jsxs("div",{className:`border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-all duration-300 ${h?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:v,onDragLeave:y,onDragOver:x,onDrop:w,onClick:()=>{var e;return(e=u.current)==null?void 0:e.click()},children:[r.jsx("input",{type:"file",ref:u,className:"hidden",onChange:I,multiple:!0,accept:"image/*"}),r.jsx(L,{className:"mx-auto text-gray-400"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Drag and drop images here, or click to select files"})]}),s.length>0&&r.jsx("div",{className:"mt-4 grid grid-cols-3 gap-4",children:s.map((e,t)=>r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:e.preview,alt:`Preview ${t}`,className:"w-full h-24 object-cover rounded-lg"}),r.jsx("button",{className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",onClick:()=>e.id?j(e.id):b(t),type:"button",children:r.jsx(N,{size:16})})]},t))})]})};export{M};
