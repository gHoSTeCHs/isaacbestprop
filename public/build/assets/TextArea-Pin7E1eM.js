import{r as s,W as k,j as r}from"./app-DluYvmMS.js";import{B as h}from"./AuthenticatedLayout-CzBciLRy.js";import{c as v}from"./createLucideIcon-B09UvLv5.js";/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=v("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=v("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),F=({onChange:u,value:d,id:g})=>{const[a,l]=s.useState([]),[f,n]=s.useState(!1),o=s.useRef(null);s.useEffect(()=>()=>{a.forEach(e=>{e.file&&URL.revokeObjectURL(e.preview)})},[a]),s.useEffect(()=>{if(d){const e=d.map(t=>t instanceof File?{file:t,preview:URL.createObjectURL(t)}:typeof t=="object"?{file:null,preview:t.path,id:t.id}:{file:null,preview:""});l(e)}},[d]);const x=e=>{e.preventDefault(),e.stopPropagation(),n(!0)},y=e=>{e.preventDefault(),e.stopPropagation(),n(!1)},w=e=>{e.preventDefault(),e.stopPropagation()},b=e=>{e.preventDefault(),e.stopPropagation(),n(!1);const t=Array.from(e.dataTransfer.files);m(t)},I=e=>{if(e.target.files){const t=Array.from(e.target.files);m(t)}},m=e=>{const c=e.filter(i=>i.type.startsWith("image/")).map(i=>({file:i,preview:URL.createObjectURL(i)})),p=[...a,...c];l(p),u(p.map(i=>i.file||i.preview))},D=e=>{const t=a.filter((c,p)=>p!==e);l(t),u(t.map(c=>c.file||c.preview))},{post:E,delete:j}=k({}),R=async e=>{try{await j(route("admin.images",e),{onSuccess:()=>{h.success("Image deleted successfully")}})}catch{h.error("Something went wrong")}};return r.jsxs("div",{className:"w-full max-w-md mx-auto",children:[r.jsxs("div",{className:`border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-all duration-300 ${f?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:x,onDragLeave:y,onDragOver:w,onDrop:b,onClick:()=>{var e;return(e=o.current)==null?void 0:e.click()},children:[r.jsx("input",{type:"file",ref:o,className:"hidden",onChange:I,multiple:!0,accept:"image/*"}),r.jsx(N,{className:"mx-auto text-gray-400"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Drag and drop images here, or click to select files"})]}),a.length>0&&r.jsx("div",{className:"mt-4 grid grid-cols-3 gap-4",children:a.map((e,t)=>r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:e.preview,alt:`Preview ${t}`,className:"w-full h-24 object-cover rounded-lg"}),r.jsx("button",{className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",onClick:()=>e.id?R(e.id):D(t),type:"button",children:r.jsx(L,{size:16})})]},t))})]})},M=s.forwardRef(function({value:d="",className:g="",isFocused:a=!1,...l},f){const n=s.useRef(null);return s.useImperativeHandle(f,()=>({focus:()=>{var o;return(o=n.current)==null?void 0:o.focus()}})),s.useEffect(()=>{var o;a&&((o=n.current)==null||o.focus())},[a]),r.jsx("textarea",{...l,className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 "+g,ref:n})});export{F as M,M as T};
